{% extends "base.html" %}

{% block title %}ChmodHero - Help & Tutorial{% endblock %}

{% block extra_head %}
<style>
    .section-card {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .permission-box {
        background: #1e1e1e;
        color: #00ff00;
        font-family: 'Courier New', monospace;
        padding: 15px;
        border-radius: 8px;
        margin: 10px 0;
        border: 2px solid #333;
    }
    
    .permission-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 15px;
        margin: 20px 0;
    }
    
    .permission-card {
        background: white;
        border: 2px solid #dee2e6;
        border-radius: 10px;
        padding: 20px;
        text-align: center;
        transition: all 0.3s ease;
    }
    
    .permission-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        border-color: #007bff;
    }
    
    .example-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin: 20px 0;
    }
    
    .example-card {
        background: white;
        border: 1px solid #dee2e6;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .calculator-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 15px;
        padding: 30px;
        margin: 30px 0;
    }
    
    .interactive-demo {
        background: #f8f9fa;
        border: 2px dashed #007bff;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        text-align: center;
    }
    
    .command-demo {
        background: #1e1e1e;
        color: #00ff00;
        font-family: 'Courier New', monospace;
        padding: 10px 15px;
        border-radius: 5px;
        margin: 5px 0;
        border-left: 4px solid #00ff00;
    }
    
    .explanation-bubble {
        background: #e3f2fd;
        border: 1px solid #2196f3;
        border-radius: 15px;
        padding: 15px;
        margin: 10px 0;
        position: relative;
    }
    
    .explanation-bubble::before {
        content: "üí°";
        position: absolute;
        top: -10px;
        left: 20px;
        background: #2196f3;
        color: white;
        border-radius: 50%;
        width: 30px;
        height: 30px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
    }
</style>
{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Header -->
    <div class="text-center mb-5">
        <h1 class="display-4 fw-bold">
            <i class="fas fa-graduation-cap text-primary"></i> Help & Tutorial
        </h1>
        <p class="lead text-muted">Master Linux permissions with comprehensive examples and explanations</p>
    </div>

    <!-- Quick Navigation -->
    <div class="row mb-5">
        <div class="col-12">
            <div class="card border-primary">
                <div class="card-header bg-primary text-white text-center">
                    <h5 class="mb-0"><i class="fas fa-compass"></i> Quick Navigation</h5>
                </div>
                <div class="card-body">
                    <div class="row text-center">
                        <div class="col-md-2">
                            <a href="#basics" class="btn btn-outline-primary btn-sm mb-2">
                                <i class="fas fa-book"></i><br>Basics
                            </a>
                        </div>
                        <div class="col-md-2">
                            <a href="#calculator" class="btn btn-outline-primary btn-sm mb-2">
                                <i class="fas fa-calculator"></i><br>Calculator
                            </a>
                        </div>
                        <div class="col-md-2">
                            <a href="#examples" class="btn btn-outline-primary btn-sm mb-2">
                                <i class="fas fa-code"></i><br>Examples
                            </a>
                        </div>
                        <div class="col-md-2">
                            <a href="#scenarios" class="btn btn-outline-primary btn-sm mb-2">
                                <i class="fas fa-server"></i><br>Scenarios
                            </a>
                        </div>
                        <div class="col-md-2">
                            <a href="#cheatsheet" class="btn btn-outline-primary btn-sm mb-2">
                                <i class="fas fa-list"></i><br>Cheat Sheet
                            </a>
                        </div>
                        <div class="col-md-2">
                            <a href="#practice" class="btn btn-outline-warning btn-sm mb-2">
                                <i class="fas fa-gamepad"></i><br>Practice
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Section 1: The Basics -->
    <section id="basics" class="section-card">
        <h2 class="display-6 fw-bold mb-4">
            <i class="fas fa-book text-info"></i> Understanding File Permissions
        </h2>
        
        <div class="row">
            <div class="col-lg-6">
                <h4>What Are File Permissions? ü§î</h4>
                <p>File permissions in Linux control <strong>who can do what</strong> with files and directories. Think of them as rules that determine:</p>
                <ul>
                    <li><strong>Who</strong> can access the file (owner, group, others)</li>
                    <li><strong>What</strong> they can do with it (read, write, execute)</li>
                </ul>
                
                <div class="explanation-bubble">
                    <strong>Real-world analogy:</strong> File permissions are like having different keys for your house. You (owner) have the master key, your family (group) has house keys, and visitors (others) might only be able to ring the doorbell!
                </div>
            </div>
            
            <div class="col-lg-6">
                <h4>The Three Permission Types üîê</h4>
                <div class="permission-grid">
                    <div class="permission-card">
                        <h5 class="text-primary">üìñ Read (r)</h5>
                        <p><strong>Value: 4</strong></p>
                        <p>View file contents or list directory contents</p>
                    </div>
                    <div class="permission-card">
                        <h5 class="text-success">‚úèÔ∏è Write (w)</h5>
                        <p><strong>Value: 2</strong></p>
                        <p>Modify file contents or create/delete files in directory</p>
                    </div>
                    <div class="permission-card">
                        <h5 class="text-warning">‚ö° Execute (x)</h5>
                        <p><strong>Value: 1</strong></p>
                        <p>Run file as program or enter directory</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <h4>The Three User Types üë•</h4>
                <div class="row">
                    <div class="col-md-4">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-user fa-2x text-primary mb-2"></i>
                                <h5>Owner (u)</h5>
                                <p>The user who owns the file. Usually the person who created it.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-users fa-2x text-success mb-2"></i>
                                <h5>Group (g)</h5>
                                <p>Users who belong to the file's group. Great for team collaboration.</p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card text-center">
                            <div class="card-body">
                                <i class="fas fa-globe fa-2x text-warning mb-2"></i>
                                <h5>Others (o)</h5>
                                <p>Everyone else on the system. Be careful with these permissions!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row mt-4">
            <div class="col-12">
                <h4>Reading Permission Strings üìä</h4>
                <div class="permission-box">
                    <div class="text-center">
                        <span style="color: #ff6b6b;">-</span><span style="color: #4ecdc4;">rwx</span><span style="color: #45b7d1;">r-x</span><span style="color: #96ceb4;">r--</span>
                        <br>
                        <small style="color: #999;">
                            <span style="color: #ff6b6b;">Type</span> 
                            <span style="color: #4ecdc4;">Owner</span> 
                            <span style="color: #45b7d1;">Group</span> 
                            <span style="color: #96ceb4;">Others</span>
                        </small>
                    </div>
                </div>
                <div class="explanation-bubble">
                    <strong>Breaking it down:</strong>
                    <ul class="mb-0">
                        <li><strong>First character:</strong> File type (- = file, d = directory, l = link)</li>
                        <li><strong>Next 3 characters:</strong> Owner permissions (rwx = read, write, execute)</li>
                        <li><strong>Next 3 characters:</strong> Group permissions (r-x = read, execute only)</li>
                        <li><strong>Last 3 characters:</strong> Others permissions (r-- = read only)</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 2: Interactive Permission Calculator -->
    <section id="calculator" class="calculator-section">
        <h2 class="display-6 fw-bold mb-4">
            <i class="fas fa-calculator"></i> Interactive Permission Calculator
        </h2>
        
        <div class="row">
            <div class="col-md-6">
                <h4>Enter Octal Permissions:</h4>
                <div class="input-group mb-3">
                    <input type="text" class="form-control form-control-lg" id="octal-input" 
                           placeholder="e.g., 755" maxlength="3" pattern="[0-7]{3}">
                    <button class="btn btn-light btn-lg" onclick="calculatePermissions()">
                        <i class="fas fa-magic"></i> Calculate
                    </button>
                </div>
                
                <div class="row">
                    <div class="col-4 text-center">
                        <h6>Owner</h6>
                        <div class="permission-checkboxes">
                            <div><input type="checkbox" id="owner-read"> Read (4)</div>
                            <div><input type="checkbox" id="owner-write"> Write (2)</div>
                            <div><input type="checkbox" id="owner-execute"> Execute (1)</div>
                        </div>
                    </div>
                    <div class="col-4 text-center">
                        <h6>Group</h6>
                        <div class="permission-checkboxes">
                            <div><input type="checkbox" id="group-read"> Read (4)</div>
                            <div><input type="checkbox" id="group-write"> Write (2)</div>
                            <div><input type="checkbox" id="group-execute"> Execute (1)</div>
                        </div>
                    </div>
                    <div class="col-4 text-center">
                        <h6>Others</h6>
                        <div class="permission-checkboxes">
                            <div><input type="checkbox" id="others-read"> Read (4)</div>
                            <div><input type="checkbox" id="others-write"> Write (2)</div>
                            <div><input type="checkbox" id="others-execute"> Execute (1)</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <h4>Result:</h4>
                <div class="permission-box">
                    <div id="permission-result">
                        <div>Symbolic: <span id="symbolic-result">---------</span></div>
                        <div>Octal: <span id="octal-result">000</span></div>
                        <div>Description: <span id="description-result">Enter permissions above</span></div>
                    </div>
                </div>
                
                <div class="mt-3">
                    <h6>Quick Presets:</h6>
                    <button class="btn btn-outline-light btn-sm me-1 mb-1" onclick="setPermission('755')">755 (Script)</button>
                    <button class="btn btn-outline-light btn-sm me-1 mb-1" onclick="setPermission('644')">644 (File)</button>
                    <button class="btn btn-outline-light btn-sm me-1 mb-1" onclick="setPermission('600')">600 (Secret)</button>
                    <button class="btn btn-outline-light btn-sm me-1 mb-1" onclick="setPermission('777')">777 (All)</button>
                    <button class="btn btn-outline-light btn-sm me-1 mb-1" onclick="setPermission('000')">000 (None)</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 3: Practical Examples -->
    <section id="examples" class="section-card">
        <h2 class="display-6 fw-bold mb-4">
            <i class="fas fa-code text-success"></i> Real-World Examples
        </h2>
        
        <div class="example-grid">
            <div class="example-card">
                <h5><i class="fas fa-play-circle text-success"></i> Making Scripts Executable</h5>
                <div class="command-demo">$ chmod +x deploy.sh</div>
                <div class="command-demo">$ chmod 755 deploy.sh</div>
                <p><strong>Use case:</strong> Deployment scripts, build scripts, any file you need to run</p>
                <div class="explanation-bubble">
                    <strong>Why 755?</strong> Owner gets full access (7=rwx), group and others get read+execute (5=r-x). Perfect for scripts!
                </div>
            </div>
            
            <div class="example-card">
                <h5><i class="fas fa-key text-warning"></i> Securing SSH Keys</h5>
                <div class="command-demo">$ chmod 600 ~/.ssh/id_rsa</div>
                <div class="command-demo">$ chmod 644 ~/.ssh/id_rsa.pub</div>
                <p><strong>Use case:</strong> Private keys should be owner-only, public keys can be readable</p>
                <div class="explanation-bubble">
                    <strong>Security tip:</strong> Private keys with wrong permissions will be rejected by SSH!
                </div>
            </div>
            
            <div class="example-card">
                <h5><i class="fas fa-cog text-info"></i> Configuration Files</h5>
                <div class="command-demo">$ chmod 644 nginx.conf</div>
                <div class="command-demo">$ chmod 644 app.config</div>
                <p><strong>Use case:</strong> Config files that services need to read but only admins should edit</p>
                <div class="explanation-bubble">
                    <strong>Best practice:</strong> Config files should be readable by services but not executable!
                </div>
            </div>
            
            <div class="example-card">
                <h5><i class="fas fa-database text-primary"></i> Database Files</h5>
                <div class="command-demo">$ chmod 600 database.db</div>
                <div class="command-demo">$ chmod 750 backup.sh</div>
                <p><strong>Use case:</strong> Database files should be private, backup scripts executable by owner and group</p>
                <div class="explanation-bubble">
                    <strong>Security:</strong> Database files often contain sensitive data - keep them private!
                </div>
            </div>
            
            <div class="example-card">
                <h5><i class="fab fa-docker text-primary"></i> Docker & Containers</h5>
                <div class="command-demo">$ chmod 755 entrypoint.sh</div>
                <div class="command-demo">$ chmod 644 Dockerfile</div>
                <p><strong>Use case:</strong> Container entry points need to be executable, Dockerfiles are just text</p>
                <div class="explanation-bubble">
                    <strong>Container tip:</strong> Entry point scripts must be executable or container won't start!
                </div>
            </div>
            
            <div class="example-card">
                <h5><i class="fas fa-lock text-danger"></i> Secrets & Credentials</h5>
                <div class="command-demo">$ chmod 600 .env</div>
                <div class="command-demo">$ chmod 600 api-keys.txt</div>
                <p><strong>Use case:</strong> Any file containing passwords, API keys, or sensitive data</p>
                <div class="explanation-bubble">
                    <strong>Golden rule:</strong> If it's secret, make it 600 (owner-only access)!
                </div>
            </div>
        </div>
    </section>

    <!-- Section 4: Common Scenarios -->
    <section id="scenarios" class="section-card">
        <h2 class="display-6 fw-bold mb-4">
            <i class="fas fa-server text-warning"></i> DevOps Scenarios You'll Encounter
        </h2>
        
        <div class="accordion" id="scenarioAccordion">
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#scenario1">
                        üöÄ CI/CD Pipeline Issues
                    </button>
                </h2>
                <div id="scenario1" class="accordion-collapse collapse show" data-bs-parent="#scenarioAccordion">
                    <div class="accordion-body">
                        <h6>Problem:</h6>
                        <p>Your build pipeline fails because scripts don't have execute permissions.</p>
                        <div class="command-demo">ERROR: Permission denied: './build.sh'</div>
                        <h6>Solution:</h6>
                        <div class="command-demo">$ chmod +x build.sh test.sh deploy.sh</div>
                        <div class="command-demo">$ chmod 755 *.sh  # Alternative</div>
                        <p><strong>Lesson:</strong> Always check script permissions in your CI/CD setup!</p>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#scenario2">
                        üîê Security Audit Failures
                    </button>
                </h2>
                <div id="scenario2" class="accordion-collapse collapse" data-bs-parent="#scenarioAccordion">
                    <div class="accordion-body">
                        <h6>Problem:</h6>
                        <p>Security scan finds files with overly permissive permissions.</p>
                        <div class="command-demo">CRITICAL: Private key readable by all users</div>
                        <h6>Solution:</h6>
                        <div class="command-demo">$ chmod 600 ~/.ssh/id_rsa</div>
                        <div class="command-demo">$ chmod 600 /etc/ssl/private/*.key</div>
                        <p><strong>Lesson:</strong> Private keys and secrets should always be 600!</p>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#scenario3">
                        üê≥ Docker Container Problems
                    </button>
                </h2>
                <div id="scenario3" class="accordion-collapse collapse" data-bs-parent="#scenarioAccordion">
                    <div class="accordion-body">
                        <h6>Problem:</h6>
                        <p>Container won't start because entrypoint script isn't executable.</p>
                        <div class="command-demo">docker: Error response: exec format error</div>
                        <h6>Solution:</h6>
                        <div class="command-demo">$ chmod +x entrypoint.sh</div>
                        <div class="command-demo"># In Dockerfile: RUN chmod +x entrypoint.sh</div>
                        <p><strong>Lesson:</strong> Set permissions before building Docker images!</p>
                    </div>
                </div>
            </div>
            
            <div class="accordion-item">
                <h2 class="accordion-header">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#scenario4">
                        ‚ò∏Ô∏è Kubernetes Secret Issues
                    </button>
                </h2>
                <div id="scenario4" class="accordion-collapse collapse" data-bs-parent="#scenarioAccordion">
                    <div class="accordion-body">
                        <h6>Problem:</h6>
                        <p>Kubernetes secrets mounted with wrong permissions, causing security issues.</p>
                        <div class="command-demo">WARNING: Secret files readable by all pod users</div>
                        <h6>Solution:</h6>
                        <div class="command-demo">$ chmod 600 /var/secrets/*</div>
                        <div class="command-demo"># Or set defaultMode: 0600 in volume spec</div>
                        <p><strong>Lesson:</strong> Always secure mounted secrets in K8s!</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section 5: Cheat Sheet -->
    <section id="cheatsheet" class="section-card">
        <h2 class="display-6 fw-bold mb-4">
            <i class="fas fa-list text-info"></i> Ultimate Chmod Cheat Sheet
        </h2>
        
        <div class="row">
            <div class="col-md-6">
                <h4>Common Octal Permissions</h4>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Octal</th>
                            <th>Symbolic</th>
                            <th>Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="table-success">
                            <td><code>755</code></td>
                            <td><code>rwxr-xr-x</code></td>
                            <td>Scripts, executables</td>
                        </tr>
                        <tr class="table-info">
                            <td><code>644</code></td>
                            <td><code>rw-r--r--</code></td>
                            <td>Regular files, configs</td>
                        </tr>
                        <tr class="table-warning">
                            <td><code>600</code></td>
                            <td><code>rw-------</code></td>
                            <td>Private keys, secrets</td>
                        </tr>
                        <tr class="table-primary">
                            <td><code>750</code></td>
                            <td><code>rwxr-x---</code></td>
                            <td>Group-executable scripts</td>
                        </tr>
                        <tr class="table-secondary">
                            <td><code>700</code></td>
                            <td><code>rwx------</code></td>
                            <td>Private directories</td>
                        </tr>
                        <tr class="table-danger">
                            <td><code>777</code></td>
                            <td><code>rwxrwxrwx</code></td>
                            <td>‚ö†Ô∏è Dangerous - avoid!</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="col-md-6">
                <h4>Symbolic Notation Quick Reference</h4>
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>Command</th>
                            <th>Effect</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>chmod +x file</code></td>
                            <td>Add execute for all</td>
                        </tr>
                        <tr>
                            <td><code>chmod u+rwx file</code></td>
                            <td>Owner gets all permissions</td>
                        </tr>
                        <tr>
                            <td><code>chmod go-w file</code></td>
                            <td>Remove write from group & others</td>
                        </tr>
                        <tr>
                            <td><code>chmod a=r file</code></td>
                            <td>Everyone gets read only</td>
                        </tr>
                        <tr>
                            <td><code>chmod u=rwx,go=rx file</code></td>
                            <td>Owner: rwx, others: rx</td>
                        </tr>
                        <tr>
                            <td><code>chmod -R 755 dir/</code></td>
                            <td>Recursive permission change</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="explanation-bubble">
                    <strong>Symbols:</strong>
                    <ul class="mb-0">
                        <li><code>u</code> = owner (user)</li>
                        <li><code>g</code> = group</li>
                        <li><code>o</code> = others</li>
                        <li><code>a</code> = all (u+g+o)</li>
                        <li><code>+</code> = add permission</li>
                        <li><code>-</code> = remove permission</li>
                        <li><code>=</code> = set exact permission</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Practice Section -->
    <section id="practice" class="interactive-demo">
        <h2 class="display-6 fw-bold mb-4">
            <i class="fas fa-gamepad text-warning"></i> Ready to Practice?
        </h2>
        <p class="lead">Now that you understand the concepts, let's put your knowledge to the test!</p>
        
        <div class="d-grid gap-2 d-md-flex justify-content-md-center">
            <a href="{{ url_for('game') }}" class="btn btn-warning btn-lg px-4">
                <i class="fas fa-play"></i> Start Game
            </a>
            <a href="{{ url_for('tutorial') }}" class="btn btn-info btn-lg px-4">
                <i class="fas fa-book"></i> Interactive Tutorial
            </a>
        </div>
        
        <div class="mt-4">
            <h5>üí° Pro Tips for the Game:</h5>
            <ul class="text-start" style="max-width: 600px; margin: 0 auto;">
                <li>Read the scenario carefully - context matters!</li>
                <li>Think about security - who really needs access?</li>
                <li>Both octal (755) and symbolic (+x) commands work</li>
                <li>Use hints if you're stuck - learning is the goal!</li>
                <li>Try different approaches - there's often more than one solution</li>
            </ul>
        </div>
    </section>
</div>

<script>
function calculatePermissions() {
    const octal = document.getElementById('octal-input').value;
    
    if (!/^[0-7]{3}$/.test(octal)) {
        alert('Please enter a valid 3-digit octal number (0-7)');
        return;
    }
    
    fetch('/api/calculate_permission', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ octal: octal })
    })
    .then(response => response.json())
    .then(data => {
        if (data.success) {
            document.getElementById('symbolic-result').textContent = data.symbolic;
            document.getElementById('octal-result').textContent = data.octal;
            
            // Update checkboxes
            const perms = data.permissions;
            document.getElementById('owner-read').checked = perms.owner.read;
            document.getElementById('owner-write').checked = perms.owner.write;
            document.getElementById('owner-execute').checked = perms.owner.execute;
            document.getElementById('group-read').checked = perms.group.read;
            document.getElementById('group-write').checked = perms.group.write;
            document.getElementById('group-execute').checked = perms.group.execute;
            document.getElementById('others-read').checked = perms.others.read;
            document.getElementById('others-write').checked = perms.others.write;
            document.getElementById('others-execute').checked = perms.others.execute;
            
            // Update description
            const descriptions = {
                '755': 'Standard executable file (scripts)',
                '644': 'Standard readable file (configs)',
                '600': 'Private file (secrets, keys)',
                '750': 'Group-executable script',
                '700': 'Private directory/script',
                '777': '‚ö†Ô∏è World-writable (dangerous!)',
                '000': 'No permissions (locked)'
            };
            
            document.getElementById('description-result').textContent = 
                descriptions[octal] || 'Custom permission configuration';
        }
    })
    .catch(error => {
        console.error('Error:', error);
        alert('Error calculating permissions');
    });
}

function setPermission(octal) {
    document.getElementById('octal-input').value = octal;
    calculatePermissions();
}

// Allow Enter key in calculator
document.getElementById('octal-input').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        calculatePermissions();
    }
});

// Initialize with 755
document.addEventListener('DOMContentLoaded', function() {
    setPermission('755');
});
</script>
{% endblock %}